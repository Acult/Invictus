namespace = me_argos

me_argos.1 = {
    type = country_event
    title = me_argos_1_title
    desc = me_argos_1_desc
    picture = aqueducts
    right_portrait = scope:potential_wife
    right_portrait = scope:potential_wife_2
    right_portrait = scope:potential_wife_3
    left_portrait = current_ruler
    left_portrait = c:MAC.current_ruler


    immediate = {
    	c:MAC = {
	    	random_character = {
	    		limit = {
	    			has_same_family = c:MAC.current_ruler
	    			is_female = yes
	    			age >= 16
	    			age <= 50
	    		}
	    		save_scope_as = potential_wife
	    	}
	    	random_character = {
	    		limit = {
	    			NOT = { THIS = scope:potential_wife }
	    			has_same_family = c:MAC.current_ruler
	    			is_female = yes
	    			age >= 16
	    			age <= 50
	    			is_married = no
	    		}
	    		save_scope_as = potential_wife_2
	    	}
	    	random_character = {
	    		limit = {
	    			NOR = {
	    				THIS = scope:potential_wife
	    				THIS = scope:potential_wife_2
	    			}
	    			has_same_family = c:MAC.current_ruler
	    			is_female = yes
	    			age >= 16
	    			age <= 50
	    			is_married = no
	    		}
	    		save_scope_as = potential_wife_3
	    	}
    	}
    }

    option = {      
        name = me_argos_1.a
        #Marry potential_wife
        trigger = { exists = scope:potential_wife }
        c:MAC = {
        	set_variable = {
        		name = wife_1
        		days = 180
        	}
	       	trigger_event = {
	       		id = me_argos.2
	       		days = { 5 10 }
	       	}
       	}
    }
    option = {      
        name = me_argos_1.b
        trigger = { exists = scope:potential_wife_2 }
        c:MAC = {
        	set_variable = {
        		name = wife_2
        		days = 180
        	}
	       	trigger_event = {
	       		id = me_argos.2
	       		days = { 5 10 }
	       	}
       	}
        #Marry potential_wife_2
    }
    option = {      
        name = me_argos_1.c
        trigger = { exists = scope:potential_wife_3 }
        c:MAC = {
        	set_variable = {
        		name = wife_3
        		days = 180
        	}
	       	trigger_event = {
	       		id = me_argos.2
	       		days = { 5 10 }
	       	}
       	}
        #Marry potential_wife_3
    }
}
me_argos.2 = {	#EVENT FOR MACEDON - A Marriage offer from Argos
    type = country_event
    title = me_argos_2_title
    desc = me_argos_2_desc
    picture = aqueducts
    right_portrait = scope:potential_wife
    right_portrait = scope:potential_wife_2
    right_portrait = scope:potential_wife_3
    left_portrait = current_ruler
    left_portrait = c:ARG.current_ruler

    immediate = {
    	hidden_effect = {
    		if = {
    			limit = { is_married = yes }
	    		c:ARG.current_ruler = {
	    			divorce_character = spouse
	    		}
    		}
    	}
    }

    option = {      
        name = me_argos_2.a
        #Marry them
        c:ARG = {
        	set_variable = {
        		name = marriage_accepted
        		days = 365
        	}
        }
        	switch = {
        		trigger = has_variable
        		wife_1 = {
        			if = {
        				limit = { 
        					scope:potential_wife = { is_married = yes }
        				}
        				scope:potential_wife = { 
        					divorce_character = spouse 
        				}
        				c:ARG.current_ruler = {
        					marry_character = scope:potential_wife
        				}
        			}
        			else = {
        				c:ARG.current_ruler = {
        					marry_character = scope:potential_wife
        				}
        			}
        			save_scope_as = married_wife
        		}
        		wife_2 = {
        			if = {
        				limit = { 
        					scope:potential_wife_2 = { is_married = yes }
        				}
        				scope:potential_wife_2 = { 
        					divorce_character = spouse 
        				}
        				c:ARG.current_ruler = {
        					marry_character = scope:potential_wife_2
        				}
        			}
        			else = {
        				c:ARG.current_ruler = {
        					marry_character = scope:potential_wife_2
        				}
        			}
        			save_scope_as = married_wife
        		}
        		wife_3 = {
        			if = {
        				limit = { 
        					scope:potential_wife_3 = { is_married = yes }
        				}
        				scope:potential_wife_3 = { 
        					divorce_character = spouse 
        				}
        				c:ARG.current_ruler = {
        					marry_character = scope:potential_wife_3
        				}
        			}
        			else = {
        				c:ARG.current_ruler = {
        					marry_character = scope:potential_wife_3
        				}
        			}
        			save_scope_as = married_wife
        		}
        	}
		ai_chance = {
			base = 30 
		}   
    }
    option = {
        name = me_argos_2.b
        #Don't Marry them
        c:ARG = {
        	set_variable = {
        		name = marriage_rejected
        		days = 365
        	}
        	add_opinion = { 
        		modifier = unfriendly_neighbors
        		target = ROOT
        	}
        }
		ai_chance = {
			base = 5
		}
    }
    after = {
    	c:ARG = {
	    	trigger_event = {
	    		id = me_argos.3
	    		days = 5
	    	}
	    }
    }
}
me_argos.3 = {
    type = country_event
    title = me_argos_3_title
    desc = me_argos_3_desc
	desc = {
		first_valid = {
			triggered_desc = {	##Marriage Accepted
				trigger = { has_variable = marriage_accepted }	
				desc = "me_argos_3_desc_1"
			}
			triggered_desc = {	##Marriage Rejected
				trigger = { has_variable = marriage_rejected }	
				desc = "me_argos_3_desc_2"
			}
		}
	}
    picture = aqueducts
    left_portrait = current_ruler
    right_portrait = scope:married_wife

    trigger = {
    
    }

    immediate = {

    }

    option = {
        name = me_argos_3.a
        trigger = { has_variable = marriage_accepted }
        custom_tooltip = me_argos_3_tt
    }
    option = {      
        name = me_argos_3.b
        trigger = { has_variable = marriage_rejected }

    }
}
