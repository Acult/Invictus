namespace = cappadocia_event

cappadocia_event.1 = { # eumenes' kids start rebellion
	type = country_event
	title = cappadocia_event.1.t
	desc = cappadocia_event.1.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = char:431 # Eumenes
	right_portrait = char:432 # Artonis

	immediate = {
		custom_tooltip = eumenes_heirs_rise_up_tt
		hidden_effect = {
			if = {
				limit = {
					char:432 = { is_alive = yes }
				}
				char:432 = {
					remove_all_positions = yes
					save_scope_as = eumenid_rebllion_leader
				}
			}
			else_if = {
				limit = {
					char:433 = { is_alive = yes }
				}
				char:433 = {
					remove_all_positions = yes
					save_scope_as = eumenid_rebllion_leader
				}
			}
			else_if = {
				limit = {
					char:434 = { is_alive = yes }
				}
				char:434 = {
					remove_all_positions = yes
					save_scope_as = eumenid_rebllion_leader
				}
			}
			else_if = {
				limit = {
					char:435 = { is_alive = yes }
				}
				char:435 = {
					remove_all_positions = yes
					save_scope_as = eumenid_rebllion_leader
				}
			}
			start_civil_war = scope:eumenid_rebllion_leader
			scope:eumenid_rebllion_leader.employer = {
				set_country_heritage = cappadocian_heritage
				change_country_name = cappadocia_rebellion_name
				change_country_adjective = cappadocia_rebellion_adj
				save_scope_as = eumenid_rebellion_scope
				change_country_color = eumenid_blue
			}
			p:1954 = { # Garsaura
				set_owned_by = scope:eumenid_rebellion_scope
			}
			scope:eumenid_rebellion_scope = {
				every_owned_province = {
					limit = {
						NOT = { this = p:1954 }
					}
					remove_building_level = fortress_building
					set_owned_by = root
				}
			}
			p:1788 = { # Nora
				set_owned_by = scope:eumenid_rebellion_scope
			}
			if = {
				limit = {
					NOT = {
						scope:eumenid_rebllion_leader = char:433
						char:433 = { is_alive = yes }
					}
				}
				char:433 = {
					move_country = scope:eumenid_rebellion_scope
				}
			}
			if = {
				limit = {
					NOT = {
						scope:eumenid_rebllion_leader = char:434
						char:434 = { is_alive = yes }
					}
				}
				char:434 = {
					move_country = scope:eumenid_rebellion_scope
				}
			}
			if = {
				limit = {
					NOT = {
						scope:eumenid_rebllion_leader = char:435
						char:435 = { is_alive = yes }
					}
				}
				char:435 = {
					move_country = scope:eumenid_rebellion_scope
				}
			}
		}
	}

	option = {
		name = cappadocia_event.1.a
		custom_tooltip = help_from_overlord_tt
		overlord = {
			trigger_event = {
				id = cappadocia_event.5
				days = 7
			}
		}
	}
}

cappadocia_event.2 = { # send gifts to overlord
	type = country_event
	title = cappadocia_event.2.t
	desc = cappadocia_event.2.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = overlord.current_ruler

	option = {
		name = cappadocia_event.2.a
		add_treasury = -300
	}

	option = {
		name = cappadocia_event.2.b
		add_manpower = -10
		set_variable = sent_manpower_cap
	}

	after = {
		overlord = {
			trigger_event = {
				id = cappadocia_event.3
				days = { 7 14 }
			}
		}
	}
}

cappadocia_event.3 = { #ping antigonids from c:CAP for gifts
	type = country_event
	title = cappadocia_event.3.t
	desc = cappadocia_event.3.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = c:CAP.current_ruler

	immediate = {
		if = {
			limit = {
				c:CAP = {
					has_variable = sent_manpower_cap
				}
			}
			add_manpower = 10
		}
		else = {
			add_treasury = 300
		}
	}

	option = { # send tech
		name = cappadocia_event.3.b
		add_country_modifier = {
			name = cap_anti_temp_tech_mod
			duration = 1825 # 5 years
		}
		c:CAP = {
			set_variable = tech_received
		}
	}

	option = { # send pi; some will get "converted" (very favourably) into a free province investment
		name = cappadocia_event.3.b
		add_political_influence = -50
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.4
				days = { 90 120 } # so simulate a longer decision time
			}
		}
	}
}

cappadocia_event.4 = { # ping gift from overlord
	type = country_event
	title = cappadocia_event.4.t
	desc = cappadocia_event.4.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = overlord.current_ruler

	option = {
		name = cappadocia_event.4.a
		if = {
			limit = {
				has_variable = tech_received
			}
			add_innovation = 1
			add_research = {
				technology = military_tech
				value = 5
			}
				add_research = {
				technology = civic_tech
				value = 5
			}
			add_research = {
				technology = oratory_tech
				value = 5
			}
			add_research = {
				technology = religious_tech
				value = 5
			}
		}
		else = {
			add_political_influence = 25
			add_1_free_province_investments = yes
		}
	}

	after = {
		if = {
			limit = { has_variable = tech_received }
			remove_variable = tech_received
		}
		if = {
			limit = { has_variable = sent_manpower_cap }
			remove_variable = sent_manpower_cap
		}
	}
}

cappadocia_event.5 = { # ping to antiginids about eumenes
	type = country_event
	title = cappadocia_event.5.t
	desc = cappadocia_event.5.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = c:CAP.current_ruler

	option = { # join war
		name = cappadocia_event.5.a
		every_current_war = {
			limit = {
				any_war_defender = {
					this = c:CAP
				}
				is_civil_war = yes
			}
			root.overlord = {
				add_to_war = {
					target = PREV.PREV
					attacker = no
					leader = no
				}
			}
		}
		c:CAP = {
			set_variable = overlord_joined_war_var
		}
	}

	option = { # send help
		name = cappadocia_event.5.b
		add_manpower = -5
		add_treasury = -100
		c:CAP = {
			set_variable = helped_in_war_var
		}
	}

	option = { # don't help and ignore
		name = cappadocia_event.5.c
		reverse_add_opinion = {
			modifier = manpower_gift_neg_opmod
			target = c:CAP
		}
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.6
				days = 7
			}
		}
	}
}

cappadocia_event.6 = { # ping eumenes help or not by antigonids
	type = country_event
	title = cappadocia_event.6.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = overlord_joined_war_var }
				desc = cappadocia_event.6.desc_1
			}
			triggered_desc = {
				trigger = { has_variable = helped_in_war_var }
				desc = cappadocia_event.6.desc_2
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.6.desc_3
			}
		}
	}
	picture = successors

	option = {
		name = cappadocia_event.6.a
		if = {
			limit = {
				has_variable = helped_in_war_var
			}
			add_treasury = 100
			add_manpower = 5
		}
	}

	after = {
		if = {
			limit = { has_variable = helped_in_war_var }
			remove_variable = helped_in_war_var
		}
		if = {
			limit = { has_variable = overlord_joined_war_var }
			remove_variable = overlord_joined_war_var
		}
	}
}

cappadocia_event.7 = { # Ariarathes tries to seize the throne
	type = country_event
	title = cappadocia_event.7.t
	desc = cappadocia_event.7.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = char:50

	immediate = {
		custom_tooltip = ariarathes_rebellion_tt
		hidden_effect = {
			p:1854 = { # Melitene
				create_country = {
					name = {
						name = "ARI_REB_NAME"
						adjective = "ARI_REB_ADJECTIVE"
					}
					set_country_heritage = cappadocian_heritage
					save_scope_as = ariarathes_rebellion_scope
					if = {
						limit = {
							c:ARM = {
								has_land = yes
							}
						}
						c:ARM = {
							make_subject = {
								target = scope:ariarathes_rebellion_scope
								type = tributary
							}
						}
					}
					add_treasury = 250
					random_character = {
						limit = {
							is_ruler = yes
						}
						save_scope_as = misery_for_me
						remove_all_positions = yes
						move_country = c:MER
					}
					set_as_ruler = char:50
				}
				area = {
					every_area_province = {
						set_owned_by = scope:ariarathes_rebellion_scope
					}
				}	
			}
		}
		scope:ariarathes_rebellion_scope = {
			declare_war_with_wargoal = { # should call overlord in
				target = root
				war_goal = imperial_conquest_wargoal
			}
			random_current_war = {
				limit = {
					any_war_defender = {
						tag = CAP
					}
				}
				save_scope_as = ari_war_scope
			}
			if = {
				limit = {
					c:ARM = {
						has_land = yes
					}
				}
				c:ARM = {
					add_to_war = {
						target = scope:ari_war_scope
						attacker = yes
						leader = no
					}
				}
			}
		}
	}

	option = {
		name = cappadocia_event.7.a
		add_country_modifier = {
			name = satrapy_borders_restored
			duration = -1
		}
	}

	after = {
		scope:misery_for_me = {
			move_country = scope:ariarathes_rebellion_scope
		}
	}
}

cappadocia_event.8 = { # Buy Tyana from the Antigonids event
	type = country_event
	title = cappadocia_event.8.t
	desc = cappadocia_event.8.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = overlord.current_ruler

	trigger = {
		overlord = {
			any_owned_province = {
				is_in_area = cappadocia_garsauritis_area
			}
		}
	}

	option = { # Try to Buy
		name = cappadocia_event.8.a
		add_treasury = -300
		overlord = {
			trigger_event = {
				id = cappadocia_event.9
				days = 7
			}
		}
	}

	option = { # not worth it
		name = cappadocia_event.8.a
	}
}

cappadocia_event.9 = { # ping overlord about c:CAP wanting to buy Tyanitis
	type = country_event
	title = cappadocia_event.9.t
	desc = cappadocia_event.9.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = c:CAP.current_ruler

	option = { # Try to Buy
		name = cappadocia_event.9.a
		add_treasury = 300
		area:cappadocia_garsauritis_area = {
			every_area_province = {
				limit = {
					exists = owner
					owner = root
				}
				set_owned_by = c:CAP
			}
		}
	}

	option = { # no, we do not sell
		name = cappadocia_event.9.a
		c:CAP = {
			set_variable = not_sold_land_var
		}
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.10
				days = 15
			}
		}
	}
}

cappadocia_event.10 = { # notif of land acquiry sucessful (or not)
	type = country_event
	title = cappadocia_event.10.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = not_sold_land_var }
				desc = cappadocia_event.10.desc_1
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.10.desc_2
			}
		}
	}
	picture = successors

	left_portrait = current_ruler
	right_portrait = overlord.current_ruler

	immediate = {
		if = {
			limit = {
				has_variable = not_sold_land_var
			}
			add_treasury = 300 # money back
			custom_tooltip = got_no_sold_land_cap_tt
		}
		else = {
			custom_tooltip = got_sold_land_cap_tt
		}
	}

	option = { # bought
		name = cappadocia_event.10.a
		trigger = {
			NOT = { has_variable = not_sold_land_var }
		}
		exclusive = yes
	}

	option = {
		name = cappadocia_event.10.b
		trigger = {
			has_variable = not_sold_land_var
		}
		exclusive = yes
		remove_variable = not_sold_land_var
	}
}

cappadocia_event.11 = { # change subject type to no longer be integrateable
	type = country_event
	title = cappadocia_event.11.t
	desc = cappadocia_event.11.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = overlord.current_ruler

	option = {
		name = cappadocia_event.11.a
		overlord = {
			release_subject = c:CAP
			make_subject = { 
				target = c:CAP
				type = subject_colony
			}
		}
		set_variable = {
			name = chose_to_be_subject
			days = 18250 # 50 years; will unlock generic independence mission once variable is gone
		}
		set_variable = chose_to_remain_subject # unlocks independce tree generally
		add_country_modifier = {
			name = cap_subject_mod
			duration = -1
		}
	}
}

cappadocia_event.12 = { # start of event chain where you get to become a useful subject
	type = country_event
	title = cappadocia_event.12.t
	desc = cappadocia_event.12.desc
	picture = successors

	left_portrait = current_ruler
	right_portrait = overlord.current_ruler

	#immediate = {} # create an ambassador character that is still at home in the overlord; also create characters on event chain resolution and delete variables

	option = { # negotiate for better political standing
		name = cappadocia_event.12.a
		add_political_influence = -50
		overlord = {
			trigger_event = {
				id = cappadocia_event.13
				days = 7
			}
		}
	}

	option = { # negotiate for permanent military support
		name = cappadocia_event.12.b
		add_political_influence = -50
		overlord = {
			trigger_event = {
				id = cappadocia_event.14
				days = 7
			}
		}
	}

	option = { # negotiate for technological help
		name = cappadocia_event.12.c
		trigger = {
			overlord.military_tech > root.military_tech
		}
		add_political_influence = -50
		overlord = {
			trigger_event = {
				id = cappadocia_event.15
				days = 7
			}
		}
	}

	option = { # negotiate for economic development
		name = cappadocia_event.12.d
		add_political_influence = -50
		overlord = {
			trigger_event = {
				id = cappadocia_event.17
				days = 7
			}
		}
	}
}

cappadocia_event.13 = { # negotiate for better political standing; POV overlord
	type = country_event
	title = cappadocia_event.13.t
	desc = cappadocia_event.13.desc
	picture = successors

	left_portrait = current_ruler 
	right_portrait = c:CAP.current_ruler

	option = { # accede
		name = cappadocia_event.13.a
		c:CAP = {
			set_variable = acceded_cap_pol_standing
		}
	}

	option = { # counter offer
		name = cappadocia_event.13.b
		c:CAP = {
			set_variable = counter_offer_cap_pol_standing
		}
	}

	option = { # deny
		name = cappadocia_event.13.c
		ai_chance = {
			modifier = {
				multiply = 0
			}
		}
		reverse_add_opinion = {
			modifier = manpower_gift_neg_opmod
			target = c:CAP
		}
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.16
				days = 7
			}
		}
	}
}

cappadocia_event.14 = { # negotiate for permanent military support; POV overlord
	type = country_event
	title = cappadocia_event.14.t
	desc = cappadocia_event.14.desc
	picture = successors

	left_portrait = current_ruler 
	right_portrait = c:CAP.current_ruler

	option = { # send advisor / experienced commander
		name = cappadocia_event.14.a
		c:CAP = { set_variable = mil_help_rec_cap }
	}

	option = { # do not send anything
		name = cappadocia_event.14.b
		ai_chance = {
			modifier = {
				multiply = 0
			}
		}
		reverse_add_opinion = {
			modifier = manpower_gift_neg_opmod
			target = c:CAP
		}
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.18
				days = 7
			}
		}
	}
}


cappadocia_event.15 = { # negotiate for technological help; POV overlord
	type = country_event
	title = cappadocia_event.15.t
	desc = cappadocia_event.15.desc
	picture = successors

	left_portrait = current_ruler 
	right_portrait = c:CAP.current_ruler

	option = { # send tech
		name = cappadocia_event.15.a
		c:CAP = { set_variable = tech_help_rec_cap }
	}

	option = { # keep tech
		name = cappadocia_event.15.b
		ai_chance = {
			modifier = {
				multiply = 0
			}
		}
		reverse_add_opinion = {
			modifier = manpower_gift_neg_opmod
			target = c:CAP
		}
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.19
				days = 7
			}
		}
	}
}

cappadocia_event.16 = { # ping back politcial standing
	type = country_event
	title = cappadocia_event.16.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = acceded_cap_pol_standing }
				desc = cappadocia_event.16.desc_1
			}
			triggered_desc = {
				trigger = { has_variable = counter_offer_cap_pol_standing }
				desc = cappadocia_event.16.desc_2
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.16.desc_3
			}
		}
	}
	picture = successors

	left_portrait = current_ruler 
	right_portrait = overlord.current_ruler

	option = { # acceded
		name = cappadocia_event.16.a
		trigger = { has_variable = acceded_cap_pol_standing }
		exclusive = yes
		add_country_modifier = {
			name = cap_diplo_mod
			duration = -1
		}
	}

	option = { # counter offer - accept
		name = cappadocia_event.16.b
		trigger = { has_variable = counter_offer_cap_pol_standing }
	}

	option = { # counter offer - try again
		name = cappadocia_event.16.c
		trigger = { has_variable = counter_offer_cap_pol_standing }
		overlord = {
			trigger_event = {
				id = cappadocia_event.20
				days = 7
			}
		}
	}

	option = { # denied
		name = cappadocia_event.16.d
		trigger = {
			NOR = {
				has_variable = counter_offer_cap_pol_standing
				has_variable = acceded_cap_pol_standing
			}
		}
		exclusive = yes
	}
}

cappadocia_event.17 = { # negotiate for economic development; POV overlord
	type = country_event
	title = cappadocia_event.17.t
	desc = cappadocia_event.17.desc
	picture = successors

	left_portrait = current_ruler 
	right_portrait = c:CAP.current_ruler

	option = { # send architect
		name = cappadocia_event.17.a
		c:CAP = {
			set_variable = eco_help_received
		}
	}

	option = { # do not send anything
		name = cappadocia_event.17.b
		ai_chance = {
			modifier = {
				multiply = 0
			}
		}
		reverse_add_opinion = {
			modifier = manpower_gift_neg_opmod
			target = c:CAP
		}
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.21
				days = 7
			}
		}
	}
}

cappadocia_event.18 = { # mil ping back
	type = country_event
	title = cappadocia_event.18.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = mil_help_rec_cap }
				desc = cappadocia_event.18.desc_1
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.18.desc_2
			}
		}
	}
	picture = successors
	left_portrait = current_ruler 
	right_portrait = overlord.current_ruler

	option = { # received
		name = cappadocia_event.18.a
		trigger = { has_variable = mil_help_rec_cap }
		exclusive = yes
		add_country_modifier = {
			name = cap_mil_mod
			duration = -1
		}
	}

	option = { # nothing
		name = cappadocia_event.18.b
	}
}

cappadocia_event.19 = { # tech ping back
	type = country_event
	title = cappadocia_event.19.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = tech_help_rec_cap }
				desc = cappadocia_event.19.desc_1
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.19.desc_2
			}
		}
	}
	picture = successors
	left_portrait = current_ruler 
	right_portrait = overlord.current_ruler

	option = { # received
		name = cappadocia_event.19.a
		trigger = { has_variable = tech_help_rec_cap }
		exclusive = yes
		add_country_modifier = {
			name = cap_tech_mod
			duration = -1
		}
	}

	option = { # nothing
		name = cappadocia_event.19.b
	}
}

cappadocia_event.20 = { # 2nd try political standing
	type = country_event
	title = cappadocia_event.20.t
	desc = cappadocia_event.20.desc
	picture = successors

	left_portrait = current_ruler 
	right_portrait = c:CAP.current_ruler

	option = { # accept
		name = cappadocia_event.20.a
		c:CAP = {
			set_variable = acceded_cap_pol_standing
		}
	}

	option = { # deny
		name = cappadocia_event.20.b
	}

	after = {
		c:CAP = {
			trigger_event = {
				id = cappadocia_event.22
				days = 7
			}
		}
	}
}

cappadocia_event.21 = { # eco ping back
	type = country_event
	title = cappadocia_event.21.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = eco_help_received }
				desc = cappadocia_event.21.desc_1
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.21.desc_2
			}
		}
	}
	picture = successors
	left_portrait = current_ruler 
	right_portrait = overlord.current_ruler

	option = { # received
		name = cappadocia_event.21.a
		trigger = { has_variable = eco_help_received }
		exclusive = yes
		add_country_modifier = {
			name = cap_eco_mod
			duration = -1
		}
	}

	option = { # nothing
		name = cappadocia_event.21.b
	}
}

cappadocia_event.22 = { # ping back politcial standing, 2nd try
	type = country_event
	title = cappadocia_event.22.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_variable = acceded_cap_pol_standing }
				desc = cappadocia_event.22.desc_1
			}
			triggered_desc = {
				trigger = { always = yes }
				desc = cappadocia_event.22.desc_2
			}
		}
	}
	picture = successors

	left_portrait = current_ruler 
	right_portrait = overlord.current_ruler

	option = { # acceded
		name = cappadocia_event.22.a
		trigger = { has_variable = acceded_cap_pol_standing }
		exclusive = yes
		add_country_modifier = {
			name = cap_diplo_mod
			duration = -1
		}
	}

	option = { # denied
		name = cappadocia_event.22.b
	}
}