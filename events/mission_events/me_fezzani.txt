namespace = me_fezzani

me_fezzani.1 = { # the fezzani crown
    type = country_event
    title = me_fezzani_1_title
    desc = me_fezzani_1_desc
    picture = throneroom
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_1.a

        add_country_modifier = {
            name = king_of_fezzan
        }
        current_ruler = {
            add_popularity = 20
            add_trait = confident
        }
    }
}

me_fezzani.2 = { # the people of fezzan
    type = country_event
    title = me_fezzani_2_title
    desc = me_fezzani_2_desc
    picture = council_country
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_2.a

        add_political_influence = -50
        add_2_free_province_investments = yes
        add_innovation = 1
        add_country_modifier = {
            name = people_of_fezzan
        }
    }
}

########################################
# Garamantes Specific 3 - 100
########################################
me_fezzani.3 = { # the kingdom of the garamantes
    type = country_event
    title = me_fezzani_3_title
    desc = me_fezzani_3_desc
    picture = persia_marching
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_3.a

        add_treasury = -75
        add_military_experience = 10
        add_centralization = 20
        current_ruler = {
            add_trait = ambitious
            add_martial = 2
        }
        add_country_modifier = {
            name = kingdom_of_garamantes
        }
    }
}

me_fezzani.4 = { # the machylia - 1
    type = country_event
    title = me_fezzani_4_title
    desc = me_fezzani_4_desc
    picture = dagger_behind_back
    left_portrait = current_ruler
    right_portrait = c:MHY.current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_4.a

        custom_tooltip = me_fezzani_4.a.tt

        add_political_influence = -25
        p:8142 = {
            add_claim = ROOT
        }

        trigger_event = {
            id = me_fezzani.21 
            days = { 3 7 }
        }

    }
}

me_fezzani.5 = { # The Crown Capital
    type = country_event
    title = me_fezzani_5_title
    desc = me_fezzani_5_desc
    picture = city_construction
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_5.a

        p:8168 = { 
            create_state_pop = citizen
            create_state_pop = citizen
            create_state_pop = citizen
            create_state_pop = freemen
            create_state_pop = freemen
            create_state_pop = freemen
            create_state_pop = freemen
        }
        add_centralization = 20
    }
}

me_fezzani.6 = { # The Desert Breadbasket
    type = country_event
    title = me_fezzani_6_title
    desc = me_fezzani_6_desc
    picture = farming
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_6.a

        add_country_modifier = {
            name = desert_breadbasket
        }
        add_centralization = 15
    }
}

me_fezzani.7 = { # Strategic Planning
    type = country_event
    title = me_fezzani_7_title
    desc = me_fezzani_7_desc
    picture = army_desert
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_7.a

        add_military_experience = 25
        add_2_free_province_investments = yes
        add_country_modifier = {
            name = strategic_planning
        }
        p:8149 = {
            add_building_level = fortress_building
        }
    }
}

me_fezzani.8 = { # The Kingdom of the Nasamonians
    type = country_event
    title = me_fezzani_8_title
    desc = me_fezzani_8_desc
    picture = war_council
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_8.a

        custom_tooltip = me_fezzani_8.a.tt

        p:8128 = {
            add_claim = ROOT
        }

        trigger_event = {
            id = me_fezzani.25
            days = { 3 7 }
        }
    }
}

me_fezzani.9 = { # The city of Waddan
    type = country_event
    title = me_fezzani_9_title
    desc = me_fezzani_9_desc
    picture = great_city
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_9.a

        add_centralization = 10

        p:8142 = {
            add_permanent_province_modifier = {
                name = waddan_glory
            }
        }
    }
}

me_fezzani.10 = { # dates
    type = country_event
    title = me_fezzani_10_title
    desc = me_fezzani_10_desc
    picture = farming
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_10.a

        add_country_modifier = {
            name = fezzani_the_perfect_date
        }
        p:8168 = {
            create_state_pop = slaves
            create_state_pop = slaves
            create_state_pop = slaves
            create_state_pop = slaves
            create_state_pop = slaves
        }
        add_innovation = 2
    }
}

me_fezzani.11 = { # The Makae
    type = country_event
    title = me_fezzani_11_title
    desc = me_fezzani_11_desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_11.a

        custom_tooltip = me_fezzani_11.a.tt
          
        p:8218 = {
            add_claim = ROOT
        }

        trigger_event = {
            id = me_fezzani.29
            days = { 3 7 }
        }
    }
}

me_fezzani.12 = { # The subjects of the garamantes
    type = country_event
    title = me_fezzani_12_title
    desc = me_fezzani_12_desc
    picture = senator_conversing
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_12.a
        
        add_political_influence = -200
        add_country_modifier = {
            name = garamantes_march
        }
        every_subject = {
            add_country_modifier = {
                name = subject_military_contribution
            }
        }
    }
}

me_fezzani.13 = { # The phazania
    type = country_event
    title = me_fezzani_13_title
    desc = me_fezzani_13_desc
    picture = army_desert
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_13.a

        custom_tooltip = me_fezzani_13.a.tt

        trigger_event = {
            id = me_fezzani.32
            days = { 3 7 }
        }
        
        add_treasury = -50
        p:8233 = {
            add_claim = ROOT
        }
    }
}

me_fezzani.14 = { # The psyllia
    type = country_event
    title = me_fezzani_14_title
    desc = me_fezzani_14_desc
    picture = greeks_marching
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_14.a

        custom_tooltip = me_fezzani_14.a.tt

        add_treasury = -50
        c:PSY = {
            every_owned_province = { add_claim = ROOT }
        }
    }
}

me_fezzani.15 = { # The Eastern Capital
    type = country_event
    title = me_fezzani_15_title
    desc = me_fezzani_15_desc
    picture = great_city
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_15.a
        
        add_innovation = 4
        p:8128 = {
            create_state_pop = freemen
            create_state_pop = freemen
            create_state_pop = freemen
            create_state_pop = freemen
            create_state_pop = slaves
            create_state_pop = slaves
            create_state_pop = slaves
            create_state_pop = slaves
        }

        trigger_event = {
            id = me_fezzani.34
            days = { 3 7 }
        }
    }
}

me_fezzani.16 = { # The mines of phazania
    type = country_event
    title = me_fezzani_16_title
    desc = me_fezzani_16_desc
    picture = quarry
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_16.a

        p:8238 = {
            add_permanent_province_modifier = {
                name = mines_phazania
            }
            create_state_pop = slaves
            create_state_pop = slaves
        }
        p:8229 = {
            add_permanent_province_modifier = {
                name = mines_phazania
            }
            create_state_pop = slaves
            create_state_pop = slaves
        }
    }
}

me_fezzani.17 = { # the land of the makae
    type = country_event
    title = me_fezzani_17_title
    desc = me_fezzani_17_desc
    picture = farming
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_17.a

        add_4_free_province_investments = yes
        p:8218 = {
            add_permanent_province_modifier = {
                name = makaean_infrastructure
            }
        }
    }
}

me_fezzani.18 = { # the ports of psyllia
    type = country_event
    title = me_fezzani_18_title
    desc = me_fezzani_18_desc
    picture = trade_port
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_18.a

        add_country_modifier = {
            name = ports_of_psyllia
        }
    }
}

me_fezzani.19 = { # Encounters with the greeks
    type = country_event
    title = me_fezzani_19_title
    desc = me_fezzani_19_desc
    picture = trade_port
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    immediate = {
        p:3343.owner = {
            save_scope_as = korniklanon_owner_scope
        }
    }

    option = {
        name = me_fezzani_19.a

        trigger_event = { # TODO event chain - cause friction with owner of 3343
            id = me_fezzani.35
            days = { 15 25 }
        }
    }
}

me_fezzani.20 = { # garamantes form fezzan
    type = country_event
    title = me_fezzani_20_title
    desc = me_fezzani_20_desc
    picture = throneroom
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    immediate = {
        random_country_culture = {
            limit = {
                is_culture = nasamonian
            }
            save_scope_as = nasamonian_culture_scope
        }
        random_country_culture = {
            limit = {
                is_culture = macaean
            }
            save_scope_as = macaean_culture_scope
        }
        random_country_culture = {
            limit = {
                is_culture = psyllic
            }
            save_scope_as = psyllic_culture_scope
        }
        random_country_culture = {
            limit = {
                is_culture = phazani
            }
            save_scope_as = phazani_culture_scope
        }
    }

    option = {
        name = me_fezzani_20.a
        
        trigger = { # gatekeep different options on an event
            is_monarchy = yes
        }
        
        change_country_name = fezzan_kingdom
        change_country_adjective = FEZZAN_ADJ
        hidden_effect = {
            change_country_color = onyx_black
        }

        current_ruler = { 
            add_popularity = popularity_large
            add_trait = invictus
        }

        add_country_modifier = {
            name = kingdom_of_fezzan
        }

        ROOT = {
            integrate_country_culture = scope:nasamonian_culture_scope
            integrate_country_culture = scope:macaean_culture_scope
            integrate_country_culture = scope:psyllic_culture_scope
            integrate_country_culture = scope:phazani_culture_scope
        }
    }

    option = {
        name = me_fezzani_20.b
        
        trigger = {
            is_monarchy = no
        }
        change_country_name = fezzan_tribe
        change_country_adjective = FEZZAN_ADJ
        hidden_effect = {
            change_country_color = onyx_black
        }

        current_ruler = { 
            add_popularity = popularity_large
            add_trait = invictus
        }

        add_country_modifier = {
            name = tribal_fezzan
        }

        ROOT = {
            integrate_country_culture = scope:nasamonian_culture_scope
            integrate_country_culture = scope:macaean_culture_scope
            integrate_country_culture = scope:psyllic_culture_scope
            integrate_country_culture = scope:phazani_culture_scope
        }
    }
}

me_fezzani.21 = { # the machylia - 2
    type = country_event
    title = me_fezzani_21_title
    desc = me_fezzani_21_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MHY.current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_21.a

        hidden_effect = { # machylia will become a subject
            random = {
                chance = 5 # small chance - it''s better want to own the mhy land
                trigger_event = { 
                    id = me_fezzani.22
                    days = { 3 5 }
                }
            }
        }

        hidden_effect = { # machylia will h8 us
            random = {
                chance = 80 # high chance
                trigger_event = { 
                    id = me_fezzani.23
                    days = { 6 8 }
                }
            }
        }
    }
}

me_fezzani.22 = { # the machylia - 3 became subject
    type = country_event
    title = me_fezzani_22_title
    desc = me_fezzani_22_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MHY.current_ruler
    trigger = {
        always = yes
    }

    immediate = {
        set_variable = machylia_subject
    }

    option = {
        name = me_fezzani_22.a
                
        c:GAR = {
            make_subject = {
                target = MHY
                type = feudatory
            }
        }
    }
}

me_fezzani.23 = { # the machylia - 4 - hate us
    type = country_event
    title = me_fezzani_23_title
    desc = me_fezzani_23_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MHY.current_ruler
    trigger = {
        always = yes
        NOT = { has_variable = machylia_subject }
    }

    option = {
        name = me_fezzani_23.a
          
        reverse_add_opinion = {
            target = c:MHY
            modifier = opinion_declared_war
        }
        hidden_effect = {
            random = {
                chance = 80 # chance machylia declares war
                trigger_event = { 
                    id = me_fezzani.24
                    days = { 3 5 }
                }
            }
        }
    }
}

me_fezzani.24 = { # the machylia - 5 final
    type = country_event
    title = me_fezzani_24_title
    desc = me_fezzani_24_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MHY.current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_24.a

        c:MHY = {
            declare_war_with_wargoal = {
                war_goal = conquer_wargoal 
                province = c:GAR.capital_scope
                target = GAR
            }
        }
    }
}

me_fezzani.25 = { # the nasamonia - 2
    type = country_event
    title = me_fezzani_25_title
    desc = me_fezzani_25_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:NAS.current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_25.a
        custom_tooltip = me_fezzani_25.a.tt

        trigger = { # has a border with nasamonia
            OR = {
                p:8142 = {
                    owner = root
                }
                p:8140 = {
                    owner = root
                }
            }
        }

        hidden_effect = { # machylia will become a subject
            random = {
                chance = 50 # medium chance
                trigger_event = { 
                    id = me_fezzani.26
                    days = { 3 5 }
                }
            }
        }

        hidden_effect = { # nasamonia will h8 us
            random = {
                chance = 80 # high chance
                trigger_event = { 
                    id = me_fezzani.27
                    days = { 6 8 }
                }
            }
        }
    }

    option = { # off nominal - MHY is our vassal we need to seize land - same as option above after seizing land
        name = me_fezzani_25.b
        custom_tooltip = me_fezzani_25.b.tt

        trigger = {
            c:MHY = {
                is_subject_of = root
            }
        }
        
        p:8147 = {
            set_owned_by = ROOT
        }
        p:8141 = {
            set_owned_by = ROOT
        }
        p:8140 = {
            set_owned_by = ROOT
        }

        hidden_effect = { # machylia will become a subject
            random = {
                chance = 50 # medium chance
                trigger_event = { 
                    id = me_fezzani.26
                    days = { 3 5 }
                }
            }
        }

        hidden_effect = { # nasamonia will h8 us
            random = {
                chance = 80 # high chance
                trigger_event = { 
                    id = me_fezzani.27
                    days = { 6 8 }
                }
            }
        }
    }

    option = { # do nothing - end event chain
        name = me_fezzani_25.c
    }
}

me_fezzani.26 = { # the nasamonians - 3 became subject
    type = country_event
    title = me_fezzani_26_title
    desc = me_fezzani_26_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:NAS.current_ruler
    trigger = {
        always = yes
    }

    immediate = {
        set_variable = nasamonian_subject
    }

    option = {
        name = me_fezzani_26.a
                
        c:GAR = {
            make_subject = {
                target = NAS
                type = feudatory
            }
        }
    }
}

me_fezzani.27 = { # the nasamonians - 4 - hate us
    type = country_event
    title = me_fezzani_27_title
    desc = me_fezzani_27_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:NAS.current_ruler
    trigger = {
        always = yes
        NOT = { has_variable = nasamonian_subject }
    }

    option = {
        name = me_fezzani_27.a
        custom_tooltip = me_fezzani_27.a.tt
          
        reverse_add_opinion = {
            target = c:NAS
            modifier = opinion_declared_war
        }
        hidden_effect = {
            random = {
                chance = 80 # chance nasamonia declares war
                trigger_event = { 
                    id = me_fezzani.28
                    days = { 3 5 }
                }
            }
        }
    }
}

me_fezzani.28 = { # the nasamonia - 5 final
    type = country_event
    title = me_fezzani_28_title
    desc = me_fezzani_28_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:NAS.current_ruler
    trigger = {
        always = yes
    }

    option = {
        name = me_fezzani_28.a

        c:NAS = {
            declare_war_with_wargoal = {
                war_goal = conquer_wargoal 
                province = c:GAR.capital_scope
                target = GAR
            }
        }
    }
}

me_fezzani.29 = { # the makae - 2
    type = country_event
    title = me_fezzani_29_title
    desc = me_fezzani_29_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MKA.current_ruler
    trigger = {
        always = yes
    }

    option = { # appease them
        name = me_fezzani_29.a

        custom_tooltip = me_fezzani_29.a.tt

        add_treasury = -200
        
    }

    option = { # insulted by their demands
        name = me_fezzani_29.b

        custom_tooltip = me_fezzani_29.b.tt

        trigger_event = { 
            id = me_fezzani.30
            days = { 3 5 }
        }
    }
}

me_fezzani.30 = { # makae 3
    type = country_event
    title = me_fezzani_30_title
    desc = me_fezzani_30_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MKA.current_ruler
    trigger = {
        always = yes
    }

    option = { 
        name = me_fezzani_30.a
        custom_tooltip = me_fezzani_30.a.tt

        add_manpower = 5 # 2500

        hidden_effect = { # machylia will h8 us
            random = {
                chance = 80 # high chance
                trigger_event = { 
                    id = me_fezzani.31
                    days = { 6 8 }
                }
            }
        }
    }
}

me_fezzani.31 = { # makae 4 - final
    type = country_event
    title = me_fezzani_31_title
    desc = me_fezzani_31_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:MKA.current_ruler
    trigger = {
        always = yes
    }

    option = { 
        name = me_fezzani_31.a

        add_military_experience = 25
        
        c:MKA = {
            declare_war_with_wargoal = {
                war_goal = imperial_conquest_wargoal
                target = GAR
            }
        }
        
    }
}

me_fezzani.32 = { # phazania 2
    type = country_event
    title = me_fezzani_32_title
    desc = me_fezzani_32_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:PHZ.current_ruler
    trigger = {
        always = yes
    }

    option = { # small chance to become subject - small money
        name = me_fezzani_32.a

        add_treasury = -50

        hidden_effect = { 
            random = {
                chance = 15 # small chance
                trigger_event = { 
                    id = me_fezzani.33
                    days = { 6 8 }
                }
            }
        }
    }

    option = { # small chance to become subject - small manpower
        name = me_fezzani_32.b

        add_manpower = -5

        hidden_effect = {
            random = {
                chance = 15 # small chance
                trigger_event = { 
                    id = me_fezzani.33
                    days = { 6 8 }
                }
            }
        }
    }

    option = { # large chance to become subject - large money
        name = me_fezzani_32.c

        add_treasury = -250

        hidden_effect = { 
            random = {
                chance = 60 # large chance
                trigger_event = { 
                    id = me_fezzani.33
                    days = { 6 8 }
                }
            }
        }
    }

    option = { # we border them - we can conquer them
        name = me_fezzani_32.d

        trigger = {
            p:8214 = {
                owner = root
            }
        }

        c:GAR = {
            declare_war_with_wargoal = {
                war_goal = conquer_wargoal 
                province = c:PHZ.capital_scope
                target = PHZ
            }
        }
    }

    option = { # do nothing
        name = me_fezzani_32.e
    }
}

me_fezzani.33 = { # phazania subject 3 - final
    type = country_event
    title = me_fezzani_33_title
    desc = me_fezzani_33_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = c:PHZ.current_ruler
    trigger = {
        always = yes
    }

    option = { 
        name = me_fezzani_33.a
                
        c:GAR = {
            make_subject = {
                target = PHZ
                type = feudatory
            }
        }
    }
}

me_fezzani.34 = { # an eastern capital - 2
    type = country_event
    title = me_fezzani_34_title
    desc = me_fezzani_34_desc
    picture = trade_port
    left_portrait = current_ruler
    trigger = {
        always = yes
    }

    option = { 
        name = me_fezzani_34.a
        
        set_capital = 8128

        p:8128 = {
            add_permanent_province_modifier = {
                name = developing_capital
            }
        }
    }

    option = { 
        name = me_fezzani_34.b

        custom_tooltip = me_fezzani_34.b.tt
    }
}

me_fezzani.35 = { # encountering the greeks
    type = country_event
    title = me_fezzani_35_title
    desc = me_fezzani_35_desc
    picture = trade_port
    left_portrait = current_ruler
    right_portrait = scope:korniklanon_owner_scope.current_ruler
    trigger = {
        always = yes
    }

    option = { 
        name = me_fezzani_35.a
          
        reverse_add_opinion = {
            target = scope:korniklanon_owner_scope
            modifier = opinion_declared_war
        }

        p:8130 = {
            add_claim = scope:korniklanon_owner_scope
        }

        p:8134 = {
            add_claim = scope:korniklanon_owner_scope
        }
    }
}