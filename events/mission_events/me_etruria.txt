namespace = me_etruria

me_etruria.1 = { # The Roman Incursion
	type = country_event
    title = me_etruria.1.title
    desc = me_etruria.1.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
    right_portrait = c:ROM.current_ruler

    option = {
    	name = me_etruria.1.a

    	add_country_modifier = {
    		name = etruria_roman_incursion_modifier
    		duration = 7300
    	}
    }
}

me_etruria.2 = { # Ostia vs Velcal
	type = country_event
    title = me_etruria.2.title
    desc = me_etruria.2.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler

	immediate = {
		c:ROM = {
			ordered_family = {
				add_to_list = roman_prestige_list
			}
		}
		ordered_in_list = {
			list = roman_prestige_list
			order_by = prestige
			position = 0
			save_scope_as = roman_prestige_hit_family
		}
	}

	option = {
		name = me_etruria.2.a

		add_treasury = -100
		add_country_modifier = {
			name = etruria_expanded_fleet_modifier
			duration = -1
		}
		p:22 = {
			add_province_modifier = {
				name = etruria_expanded_trade_routes_modifier
				duration = 3650
			}
			add_province_modifier = {
				name = etruria_expanded_trade_fleet_upkeep_modifier
				duration = 3650
			}
		}
	}

	option = {
		name = me_etruria.2.b

		add_treasury = -250
		hidden_effect = {
            create_character = {
                first_name = "Marmarce"
                family_name = "Acvilnas"
                nickname = "'The Merchant'"
                age = 25
                culture = root.culture
                religion = root.religion
                female = no
                good_martial_effect = yes
                great_charisma_effect = yes
				great_finesse_effect = yes
                add_trait = oarmaster
                add_trait = seadog
                save_scope_as = appointed_etrurian_admiral
            }
        }
        custom_tooltip = me_etruria.2.bt
        hidden_effect = {
			create_unit = {
				location = p:22
				commander = scope:appointed_etrurian_admiral
				navy = yes
				sub_unit = octere
				add_subunit = trireme
				add_subunit = trireme
				add_subunit = trireme
				add_subunit = trireme
				add_subunit = trireme
				add_subunit = hexere
				add_subunit = hexere
			}
		}
		custom_tooltip = me_etruria.2.bt2
		hidden_effect = {
			p:22 = {
				create_pop = citizen
				create_pop = citizen
				create_pop = citizen
			}
		}
		p:22 = {
			add_province_modifier = {
				name = etruria_protected_trade_modifier
				duration = 7300
			}
		}
	}

	option = {
		name = me_etruria.2.c

		c:ROM = { add_opinion = { target = root modifier = etruria_rome_good_relations } }
		root.current_ruler.family = { add_prestige = 150 }
		scope:roman_prestige_hit_family = { add_prestige = -150 }
		p:22 = {
			define_pop = {
        	    type = citizen
        	    culture = roman
        	    religion = roman_pantheon
        	}
        	define_pop = {
        	    type = citizen
        	    culture = roman
        	    religion = root.religion
        	}
        	define_pop = {
        	    type = nobles
        	    culture = roman
        	    religion = root.religion
        	}
		}
        p:22 = {
        	add_province_modifier = {
        		name = etruria_organized_trade_modifier
        		duration = 3650
        	}
        }
	}

	option = {
		name = me_etruria.2.d

		c:ROM = { add_opinion = { target = root modifier = etruria_rome_attacked_port_relations } }
		add_political_influence = -10
		add_treasury = -150
		p:15 = {
			if = {
				limit = {
					has_building = port_building
				}
				remove_building_level = port_building
			}
			if = {
				limit = {
					has_building = commerce_building
				}
				remove_building_level = commerce_building
			}
		}
		p:22 = {
			add_province_modifier = {
				name = etruria_uncontested_waters_modifier
				duration = 182
			}
		}
		p:15 = {
			add_province_modifier = {
				name = etruria_rome_ostia_sabotaged_modifier
				duration = 182
			}
		}
	}
}

me_etruria.3 = { # An Etruscan or Roman God?
	type = country_event
    title = me_etruria.3.title
    desc = me_etruria.3.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ROM.current_ruler

	immediate = {
		capital_scope.area = {
			every_area_province = {
				limit = {
					is_holy_site = no
					OR = {
                	    has_province_rank = city
                	    has_province_rank = city_metropolis
                	}
				}
				add_to_list = menrva_shrine_province_list
			}
		}
		ordered_in_list = {
            list = menrva_shrine_province_list
            order_by = total_population
            position = 0
            save_scope_as = menrva_shrine_province
        }
	}

	option = {
		name = me_etruria.3.a

		add_treasury = -150
		add_political_influence = -15
		p:22.state = {
			add_state_modifier = {
				name = state_improvement_religious
				duration = -1
				mode = add
			}
		}

		p:16 = {
			add_building_level = temple_building
			if = {
				limit = {
					is_holy_site = no
					deity:omen_minerva = { has_holy_site = no }
				}
				set_province_deity = deity:omen_minerva
			}
			add_province_modifier = {
				name = etruria_broken_tradition_modifier
				duration = 3650
			}
		}

		scope:menrva_shrine_province = {
			add_building_level = temple_building
			if = {
				limit = {
					is_holy_site = no
					deity:omen_menrva = { has_holy_site = no }
				}
				set_province_deity = deity:omen_menrva
			}
			add_permanent_province_modifier = {
				name = etruria_worship_of_menrva_modifier
			}
		}
	}

	option = {
		name = me_etruria.3.b

		add_political_influence = -30
		c:ROM = { add_opinion = { target = root modifier = etruria_rome_maintained_traditions_relations } }

		p:16 = {
			define_pop = {
        	    type = citizen
        	    culture = etruscan
        	    religion = italic_pantheon
        	}
        	define_pop = {
        	    type = citizen
        	    culture = etruscan
        	    religion = italic_pantheon
        	}
        	define_pop = {
        	    type = citizen
        	    culture = etruscan
        	    religion = italic_pantheon
        	}
        	define_pop = {
        	    type = freemen
        	    culture = etruscan
        	    religion = italic_pantheon
        	}
        	define_pop = {
        	    type = freemen
        	    culture = etruscan
        	    religion = italic_pantheon
        	}
			if = {
				limit = {
					is_holy_site = no
					deity:omen_menrva = { has_holy_site = no }
				}
				set_province_deity = deity:omen_menrva
			}
			add_province_modifier = {
				name = etruria_traditional_values_modifier
				duration = 3650
			}
		}
	}

	option = {
		name = me_etruria.3.c

		c:ROM = {
			add_opinion = { target = root modifier = etruria_rome_ignore_menrva_relations }
			add_treasury = -200
		}
		add_treasury = 200
		add_political_influence = -15
		add_stability = -5

		p:16 = {
			add_building_level = temple_building
			if = {
				limit = {
					is_holy_site = no
					deity:omen_minerva = { has_holy_site = no }
				}
				set_province_deity = deity:omen_minerva
			}
			add_province_modifier = {
				name = etruria_broken_tradition_modifier
				duration = 3650
			}
		}

		add_country_modifier = {
			name = etruria_abandoned_the_gods_modifier
			duration = 3650
		}
	}
}

me_etruria.4 = { # The Predicament of Veia
	type = country_event
    title = me_etruria.4.title
    desc = me_etruria.4.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ROM.current_ruler

	immediate = {
		random_country_culture = {
            limit = {
                is_culture = etruscan
            }
            save_scope_as = etruscan_culture_scope
        }
	}

	option = {
		name = me_etruria.4.a

		add_treasury = -150
		add_political_influence = -30
		add_manpower = -6

		random_list = {
			75 = {
				show_as_tooltip = {
					p:18 = {
						set_conquered_by = c:ETR
					}
					p:16 = {
						set_conquered_by = c:ETR
					}
				
					c:ROM = {
						add_opinion = { target = root modifier = etruria_rome_successful_rebellion_relations }
						add_stability = -10
						add_manpower = -3
					}
				}

				custom_tooltip = me_etruria.4.a.tt
				hidden_effect = {
        		    create_character = {
        		        first_name = "Larth"
        		        family_name = "Tolumnius"
        		        nickname = "'King of Veii'"
        		        age = 25
        		        culture = root.culture
        		        religion = root.religion
        		        female = no
        		        great_martial_effect = yes
        		        good_charisma_effect = yes
        		        add_trait = brave
        		        add_trait = disciplined
        		        save_scope_as = appointed_etrurian_general
        		    }
        		}

        		p:18 = {
        			add_building_level = fortress_building
        		}
        		p:16 = {
        			add_building_level = fortress_building
        			add_province_modifier = {
        				name = etruria_rebelled_modifier
        				duration = 730
        			}
        		}
        		show_as_tooltip = {
        			p:15 = {
        				add_province_modifier = {
        					name = etruria_suppressed_modifier
        					duration = 730
        				}
        			}
        		}

        		c:ROM = {
        			trigger_event = {
        				id = me_etruria.5
        			}
        		}
			}
			25 = {
				c:ROM = {
					add_opinion = { target = root modifier = etruria_rome_failed_rebellion_relations }
				}
				add_stability = -5
				p:16 = {
        			remove_building_level = fortress_building
        			add_province_modifier = {
        				name = etruria_failed_rebellion_modifier
        				duration = 365
        			}
        		}
			}
		}
	}

	option = {
		name = me_etruria.4.b

		add_treasury = -150
		add_political_influence = -10
		add_manpower = -2

		random_list = {
			50 = {
				show_as_tooltip = {
					p:18 = {
						set_conquered_by = c:ETR
					}
					p:16 = {
						set_conquered_by = c:ETR
					}
				
					c:ROM = {
						add_opinion = { target = root modifier = etruria_rome_successful_rebellion_relations }
						add_stability = -10
						add_manpower = -3
					}
				}

				p:18 = {
        			add_building_level = commerce_building
        		}
        		p:16 = {
        			add_building_level = commerce_building
        			add_province_modifier = {
        				name = etruria_rebelled_modifier
        				duration = 730
        			}
        		}
        		show_as_tooltip = {
        			p:15 = {
        				add_province_modifier = {
        					name = etruria_suppressed_modifier
        					duration = 730
        				}
        			}
        		}

        		c:ROM = {
        			trigger_event = {
        				id = me_etruria.5
        			}
        		}
			}
			50 = {
				c:ROM = {
					add_opinion = { target = root modifier = etruria_rome_failed_rebellion_relations }
				}
				add_stability = -5
				p:16 = {
        			remove_building_level = fortress_building
        			add_province_modifier = {
        				name = etruria_failed_rebellion_modifier
        				duration = 365
        			}
        		}
			}
		}
	}

	option = {
		name = me_etruria.4.c

		add_treasury = -400
		c:ROM = { add_treasury = -100 }
		add_political_influence = 50
		c:ROM = { add_opinion = { target = root modifier = etruria_rome_foreign_investments_relations } }

		custom_tooltip = me_etruria.4.c.tt
		hidden_effect = {
			capital_scope = {
				define_pop = {
        		    type = citizen
        		    culture = roman
        		    religion = roman_pantheon
        		}
        		define_pop = {
        		    type = citizen
        		    culture = roman
        		    religion = roman_pantheon
        		}
        		define_pop = {
        		    type = nobles
        		    culture = roman
        		    religion = roman_pantheon
        		}
			}
		}
		custom_tooltip = me_etruria.4.c.tt2
		hidden_effect = {
			p:16 = {
				define_pop = {
        		    type = freemen
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = freemen
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = freemen
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
				define_pop = {
        		    type = citizen
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = citizen
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = nobles
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = slaves
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = slaves
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = slaves
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
        		define_pop = {
        		    type = slaves
        		    culture = etruscan
        		    religion = italic_pantheon
        		}
			}
		}

		p:16.state = {
			add_state_modifier = {
				name = etruria_foreign_investments_trade_route_modifier
				duration = -1
			}
		}
		p:16 = {
			remove_building_level = fortress_building
			add_building_level = foundry_building
			add_building_level = aqueduct_building
			add_building_level = library_building
			add_building_level = town_hall_building
			add_province_modifier = {
				name = etruria_foreign_investments_modifier
				duration = 3650
			}
		}
	}

	option = {
		name = me_etruria.4.d

		scope:etruscan_culture_scope = {
			add_country_culture_modifier = {
				name = etruria_yearning_for_veii_modifier
				duration = 1825
			}
		}
	}
}

me_etruria.5 = { # The Loss of Veii
	type = country_event
    title = me_etruria.5.title
    desc = me_etruria.5.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ETR.current_ruler

	option = {
		name = me_etruria.5.a

		p:18 = {
			set_conquered_by = c:ETR
		}
		p:16 = {
			set_conquered_by = c:ETR
		}

		add_opinion = { target = c:ETR modifier = etruria_rome_successful_rebellion_relations }
		add_stability = -10
		add_manpower = -3

		p:15 = {
			add_province_modifier = {
				name = etruria_suppressed_modifier
				duration = 730
			}
		}
	}
}

me_etruria.6 = { # The Idea or the Place?
	type = country_event
    title = me_etruria.6.title
    desc = me_etruria.6.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler

	immediate = {
		every_integrated_culture = {
			add_to_list = integrated_culture_list
		}

		random_country_culture = {
            limit = {
                is_culture = roman
            }
            save_scope_as = latin_culture_scope
        }

        random_country_culture = {
            limit = {
                is_culture = etruscan
            }
            save_scope_as = etruscan_culture_scope
        }
	}

	option = {
		name = me_etruria.3.a

		add_country_modifier = {
			name = etruria_national_bloodlust_modifier
			duration = 3650
		}

		scope:etruscan_culture_scope = {
			add_country_culture_modifier = {
				name = etruria_national_bloodlust_culture_modifier
				duration = 3650
			}
		}
	}

	option = {
		name = me_etruria.3.b

		scope:latin_culture_scope = {
			set_country_culture_right = slaves
		}
		add_country_modifier = {
			name = etruria_masters_of_romans_modifier
			duration = 3650
		}
	}
}

me_etruria.7 = { # Warriors from Tarchuna or Velzna
	type = country_event
    title = me_etruria.7.title
    desc = me_etruria.7.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler

	option = {
		name = me_etruria.7.a

		add_political_influence = -10
		add_manpower = 4
		p:17 = {
			add_building_level = fortress_building
			add_building_level = military_building
			add_building_level = military_building
			add_building_level = military_building
		}
		p:17 = {
			add_province_modifier = {
				name = etruria_training_grounds_modifier
				duration = 1825
			}
		}
		p:21 = {
			add_province_modifier = {
				name = etruria_dishonored_pious_soldiers_modifier
				duration = 1825
			}
		}
		add_country_modifier = {
			name = etruria_dishonored_pious_soldiers_op_modifier
			duration = 1825
		}
	}

	option = {
		name = me_etruria.7.b

		add_political_influence = -10
		p:21 = {
			add_building_level = temple_building
			add_building_level = forum_building
			add_province_modifier = {
				name = etruria_training_grounds_modifier
				duration = 1825
			}
		}
		p:17 = {
			add_province_modifier = {
				name = etruria_dishonored_pious_soldiers_modifier
				duration = 1825
			}
		}
		add_country_modifier = {
			name = etruria_dishonored_pious_soldiers_op_modifier
			duration = 1825
		}
	}
}

me_etruria.8 = { # Agents on the Inside
	type = country_event
    title = me_etruria.8.title
    desc = me_etruria.8.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ROM.current_ruler

	option = {
		name = me_etruria.8.a

		custom_tooltip = me_etruria.8.a.tt
		hidden_effect = {
			c:ROM = {
				create_character = {
		    	    first_name = "Rasce"
		    	    family_name = "Churinas"
		    	    age = 25
		    	    culture = root.culture
		    	    religion = root.religion
		    	    female = no
		    	    good_martial_effect = yes
		    	    good_finesse_effect = yes
		    	    add_trait = just
		    	    add_trait = prominent
		    	    save_scope_as = minor_etrurian_spy
		    	}
		    }

		    scope:minor_etrurian_spy = {
		    	set_variable = rasce_variable
		    }
		}
	}

	option = {
		name = me_etruria.8.b

		custom_tooltip = me_etruria.8.b.tt
		hidden_effect = {
			c:ROM = {
				create_character = {
		    	    first_name = "Velthur"
		    	    family_name = "Papathnas"
		    	    age = 25
		    	    culture = root.culture
		    	    religion = root.religion
		    	    female = no
		    	    good_martial_effect = yes
		    	    good_zeal_effect = yes
		    	    add_trait = devout
		    	    add_trait = improviser
		    	    save_scope_as = minor_etrurian_spy
		    	}
		    }
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					c:ROM = {
						any_character = {
							has_variable = rasce_variable
						}
					}
				}
				trigger_event = {
					id = me_etruria.9
					days = 40
				}
			}
			else = {
				trigger_event = {
					id = me_etruria.11
					days = 40
				}
			}
		}
	}
}

me_etruria.9 = { # Meddlesome Merchants
	type = country_event
    title = me_etruria.9.title
    desc = me_etruria.9.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ROM.current_ruler

	option = {
		name = me_etruria.9.a

		current_ruler = { add_popularity = 20 }
		show_as_tooltip = {
			c:ROM = {
				add_opinion = { target = root modifier = etruria_rome_crippled_economy_relations }
				add_stability = -5
			}
			p:1 = {
				if = {
					limit = {
						has_building = fortress_building
					}
					remove_building_level = fortress_building
				}
				if = {
					limit = {
						has_building = commerce_building
					}
					remove_building_level = commerce_building
				}
				if = {
					limit = {
						has_building = town_hall_building
					}
					remove_building_level = town_hall_building
				}
				add_province_modifier = {
					name = etruria_crippled_economy_modifier
					duration = 1095
				}
			}
	
			p:15 = {
				if = {
					limit = {
						has_building = port_building
					}
					remove_building_level = port_building
				}
			}
		}

		custom_tooltip = me_etruria.9.a.tt
		hidden_effect = {
			c:ROM = { trigger_event = me_etruria.10 }
			trigger_event = {
				id = me_etruria.13
				days = 30
			}
		}
	}
}

me_etruria.10 = { # Burning Bullions
	type = country_event
    title = me_etruria.10.title
    desc = me_etruria.10.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ETR.current_ruler

	option = {
		name = me_etruria.10.a

		
		add_opinion = { target = c:ETR modifier = etruria_rome_crippled_economy_relations }
		add_stability = -5

		p:1 = {
			if = {
				limit = {
					has_building = fortress_building
				}
				remove_building_level = fortress_building
			}
			if = {
				limit = {
					has_building = commerce_building
				}
				remove_building_level = commerce_building
			}
			if = {
				limit = {
					has_building = town_hall_building
				}
				remove_building_level = town_hall_building
			}
			add_province_modifier = {
				name = etruria_crippled_economy_modifier
				duration = 1095
			}
		}

		p:15 = {
			if = {
				limit = {
					has_building = port_building
				}
				remove_building_level = port_building
			}
		}

		custom_tooltip = me_etruria.10.a.tt
		hidden_effect = {
			while = {
				count = 5
				random_unit = {
					limit = {
						is_navy = yes
					}
					random_sub_unit = {
						destroy_subunit = yes
					}
				}
			}
		}
	}
}

me_etruria.11 = { # Misguided Holy Men
	type = country_event
    title = me_etruria.11.title
    desc = me_etruria.11.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ROM.current_ruler

	option = {
		name = me_etruria.11.a

		current_ruler = { add_popularity = 20 }
		custom_tooltip = me_etruria.11.a.tt

		show_as_tooltip = {
			p:21 = {
				define_pop = {
					type = nobles
    			    culture = roman
    			    religion = roman_pantheon
				}
			}
			
			c:ROM = {
				add_opinion = { target = c:ETR modifier = etruria_rome_stole_from_us_relations }
				add_stability = -5
			}
	
			p:1 = {
				remove_building_level = court_building
			}

			random_list = {
				50 = {
					treasure:sybilline_books = {
						transfer_treasure_to_country = c:ETR
					}
				}
				50 = {
					treasure:treasure_statue_apollo_of_veii = {
						transfer_treasure_to_country = c:ETR
					}
				}
			}
			
	
			p:1 = {
				random_pops_in_province = {
					limit = {
						is_culture = roman
						has_religion = roman_pantheon
						pop_type = nobles
					}
					kill_pop = yes
				}
			}
	
			p:6 = {
				remove_province_deity = yes
			}
	
			p:1 = {
				add_province_modifier = {
					name = etruria_lost_faith_modifier
					duration = 1095
				}
			}
			
			c:ROM = {
				add_country_modifier = {
					name = etruria_lost_faith_op_modifier
					duration = 1095
				}
			}
		}

		hidden_effect = {
			c:ROM = { trigger_event = me_etruria.12 }
			trigger_event = {
				id = me_etruria.13
				days = 30
			}
		}
	}
}

me_etruria.12 = { # Burning Bulls
	type = country_event
    title = me_etruria.12.title
    desc = me_etruria.12.desc
    picture = interesting_histories_india_city
	left_portrait = current_ruler
	right_portrait = c:ETR.current_ruler

	option = {
		name = me_etruria.12.a

		p:21 = {
			define_pop = {
				type = nobles
    		    culture = roman
    		    religion = roman_pantheon
			}
		}

		add_opinion = { target = c:ETR modifier = etruria_rome_stole_from_us_relations }
		add_stability = -5

		p:1 = {
			remove_building_level = court_building
		}

		random_list = {
			50 = {
				treasure:sybilline_books = {
					transfer_treasure_to_country = c:ETR
				}
			}
			50 = {
				treasure:treasure_statue_apollo_of_veii = {
					transfer_treasure_to_country = c:ETR
				}
			}
		}

		p:1 = {
			random_pops_in_province = {
				limit = {
					is_culture = roman
					has_religion = roman_pantheon
					pop_type = nobles
				}
				kill_pop = yes
			}
		}

		p:6 = {
			remove_province_deity = yes
		}

		p:1 = {
			add_province_modifier = {
				name = etruria_lost_faith_modifier
				duration = 1095
			}
		}

		add_country_modifier = {
			name = etruria_lost_faith_op_modifier
			duration = 1095
		}
	}
}

me_etruria.13 = { # Transfer spy back event
	type = country_event

	hidden = yes

	option = {
		scope:minor_etrurian_spy = {
			remove_all_positions = yes
			move_country = c:ETR
			remove_character_modifier = foreign_citizen
			set_as_minor_character = scope:minor_etrurian_spy
			if = {
				limit = {
					has_variable = rasce_variable
				}
				remove_variable = rasce_variable
			}
			else = {
				give_office = office_pontifex
			}
		}
	}
}