

yearly_country_pulse = {

	on_actions = {
		delay = { days = { 1 364 } }
		tech_spread_pulse
		steppe_invasion_pulse
		yearly_invictus_disaster_pulse
		delay = { days = { 1 364 } }
		5_year_trade_good_pulse
		delay = { days = { 1 364 } }
		invictus_yearly_flavor_pulse #ADD EVENTS HERE
		invictus_yearly_events_effect
	}
	events = {
		bloodlines_setup_completion.3
		galatian_invasion.1
		galatian_invasion.44
		galatian_invasion.70
		galatian_invasion.71
		cyr_ophellas_01.4
	}
	effect = {
		#Vanilla
		if = {
			limit = { NOT = { has_global_variable = stormbringer } }
			random_country = {
				limit = {
					num_of_cities >= 25
					war = no
				}
				trigger_event = {
					id = storm.1 #Seas
					days = { 10 60 }
				}
				trigger_event = {
					id = storm.11 #Deserts
					days = { 10 60 }
				}
				trigger_event = {
					id = storm.21 #Snowstorms
				}
				trigger_event = {
					id = storm.25
					days = 2
				}
			}
			set_global_variable = stormbringer
		}
	}
}

invictus_yearly_events_effect = {
	#This is NOT in the main effect block so other mods can still use the yearly_country_pulse without breaking the food system.
	#As a general note: Do NEVER put things in the main on_actions effect always make a new on_action and put it in that effect for mod compatibility.
	#I'd like to do this for all on_actions eventually so Invictus is compatiable with more mods. Right now we cause incompatiblity witha lot of other mods this way for no reason.
	effect = {
		#seasonal food
		trigger_event = { id = harvest.1 days = 333 }
		trigger_event = { id = harvest.2 days = 148 }
		trigger_event = { id = monsoon.1 days = 148 }
	}
}