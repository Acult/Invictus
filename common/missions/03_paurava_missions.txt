paurava_missions = {
	header = "pauravan_missions_header"
	icon = placeholder
	repeatable = no
	chance = { factor = 50000 }

	potential = {
		NOT = { has_variable = paurava_missions_cooldown }
		TAG = PRA
	}
	on_start = {
		save_scope_as = mission_country
	}
	abort = {
		ai_mission_back_out_trigger = yes
	}
	on_abort = {
		custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = paurava_missions_cooldown
            days = 7300
	 	}
	}
	on_completion = {
		complete_mission_effect = yes
	}

	paurava_missions_task_0 = { # Descendants of Porus
		icon = "task_conquest"
		allow = {
			tag = PRA
		}
		on_completion = {
			add_political_influence = 20
		}
	}

 # Sialkot Development Branch #
	paurava_missions_task_1 = { # Capital of the Madras
		icon = "task_economical"
		requires = {
			paurava_missions_task_0
		}
		allow = {
			p:4340 = {
				has_city_status = yes
				has_building = aqueduct_building
				has_building = commerce_building
				has_building = temple_building
				has_construction = no	
				num_of_used_building_slots >= 5
			}
		}
		on_completion = {
			add_2_free_province_investments = yes
			p:4340 = {
				add_permanent_province_modifier = {
					name = trade_hub_sakala
				}
			}
		}
	}
	paurava_missions_task_2 = { # Sakalan Silk
		icon = "task_economical"
		requires = { paurava_missions_task_1 }
		highlight = {
			scope:province = {	
				owner = root
				OR = {
					trade_goods = silk
					trade_goods = leather
					trade_goods = cloth
				}
			}
		}
		allow = {
			capital_scope = {
				calc_true_if = {
					amount >= 2
					is_importing_trade_good = leather
					is_importing_trade_good = cloth
					state = {
						trade_good_imports = {
							target = silk
							value >= 2
						}
					}
				}
			}
		}
		on_completion = {
			p:4340 = {
				set_trade_goods = silk
			}
			trigger_event = {
				id = me_paurava.1 #Province trade good change
			}
		}
	}
	paurava_missions_task_3 = { # There Must Only Be One
		icon = "task_conquest"
		requires = {
			paurava_missions_task_2
		}
		prevented_by = {
			paurava_missions_task_5
		}
		highlight = {
            scope:province = {
            	is_in_area = xxxx
            }
        }
		allow = {
			owns = 7314
			p.7314 = {
				total_population < 45
				governor_policy = harsh_treatment
			}
		}
		on_completion = {
			add_treasury = 1000
			add_political_influence = 20
			gandhara_area = {
				add_state_loyalty = subtract_state_province_loyalty_huge
			}
			current_ruler = {
				add_popularity = -20
			}
			add_legitimacy = 10
			p:7314 = {
				count = 5
					random_pops_in_province = {
						kill_pop = yes
					}
			}
			add_province_modifier = {
				name = destroyer_of_taxila
				duration = 1800
			}
		}
	}
	paurava_missions_task_4 = { # Academy of Sakala
		icon = "task_economical"
		requires = {
			paurava_missions_task_3
		}
		on_start = {
			capital_scope = {
				begin_great_work_construction = {
				great_work = "academy_of_sakala"
				locator = great_work
				is_ancient = yes
				}
			}
		}
		allow = {
			capital_scope = {
				great_work_locator_is_free = yes
			}
			p:7314 = {
				owner = root
				NOT = {
					has_province_modifier = academy_of_taxila
				}
			}
			treasury >= 1000
		}
		on_completion = {
			add_treasury = -1000
			capital_scope = {
				finish_great_work_construction = {
					great_work = "academy_of_sakala"
					locator = great_work
				}
			}
		}
	}
	paurava_missions_task_5 = { # A Second Capital
		icon = "task_diplomatic"
		requires = {
			paurava_missions_task_2
		}
		prevented_by = {
			paurava_missions_task_3
		}
		highlight = {
			scope:province = {
				OR = {
					this = p:4340
					this = p:7314
				}
			}
		}
		allow = {
			p:7314 = {
				num_of_academy_building >= 2
				num_of_library_building >= 2
			}
		}
		on_completion = {
			current_ruler = {
				add_finesse = 2
			}
			add_country_modifier = {
				name = second_capital
				duration = -1
			}
			p:7314 = {
                while = {
                    count = 6
                    random_pops_in_province = {
                        limit = {
                            NOT = { pop_culture = root.culture }
                        }
                        set_pop_culture = root.culture
                    }
                }
            }
        }
	}
	paurava_missions_task_6 = { # Center of Faith
		icon = "task_religion"
		requires = {
			paurava_missions_task_4
			paurava_missions_task_5
		}
		allow = {
			current_ruler = {
				popularity = 90
			}
			legitimacy = 90
			stability = 45
			p:4340 = {
				total_population >= 40
			}
			p:4341 = {
				total_population <= 40
			}
		}
		on_completion = {
			trigger_event = {
				id = me_paurava.2 # Spread 1/3 Religions
			}
			current_ruler = {
				add_zeal = 3
			}
		}
	}
	paurava_missions_task_7 = { # Mauryan Marriage
		icon = "task_diplomatic"
		requires = {
			paurava_missions_task_0
		}
		allow = {
			any_country = {
				tag = MRY
				opinion = {
					target = root 
					value >= 100				
				}
			}
			p:4340.owner = { #change province id to the mauryan capital
				overlord.current_ruler = {
					is_friend = root.current_ruler
				}
			}
		}
		on_completion = {
			c:MRY = {
				random_character = {
					limit = {
						has_trait = maurya
						is_female = yes
						age <= 40
						age > 15
					}
					if = {
						limit = { is_married = yes }
						divorce_character = spouse
					}
					save_scope_as = marriage_partner
				}
			}
			current_ruler = {
				{ marry_character = scope:marriage_partner }
			}
		}
	}
	paurava_missions_task_8 = { # Land of Five Rivers
		icon = "task_diplomatic"
		requires = {
			paurava_missions_task_7
		}
		allow = {
			any_country = {
				tag = MRY
				opinion = {
					target = root 
					value >= 120				
				}
			}
		political_influence >= 30
		treasury >= 100
		}
		on_completion = {
			add_political_influence = -30
			add_treasury = -100
			trigger_event = {
				id = me_paurava.3 # Annex Panchanada
			}
		}
	}
	paurava_missions_task_9 = { # Matter of the Madrakas
		icon = "task_conquest"
		requires = { paurava_missions_task_7 }
		allow = {
			political_influence = 15
		}
		on_completion = {
			trigger_event = {
				id = me_paurava.4 # Claims on Madra
			}
		}
	}
	paurava_missions_task_10 = { # Tribes of Gandhara
		icon = "task_political"
		requires = { paurava_missions_task_7 }
		on_start = {
			
		}
		on_completion = {
		}
	}
	paurava_missions_task_11 = { # King Porus' Kingdom
		icon = "task_happiness"
		requires = {
			paurava_missions_task_8
			paurava_missions_task_9
			paurava_missions_task_10
		}
		allow = {
			owns_region = gandhara_area
		}
		on_completion = {
			blessing_of_porus # maybe add him as a deity ?
		}
	}
	paurava_missions_task_12 = { # Menace from Macedon
		icon = "task_battle"
		requires = { paurava_missions_task_11 }
		allow = {
			
		}
	}
	paurava_missions_task_15 = { # Greek Presence in India
		icon = "task_happiness"
		allow = {
	        any_owned_province = {
                any_pops_in_province = {
                    pop_culture_group = hellenic
                }
            }
		}
		on_completion = {
			add_country_modifier = {
				name = indo_greek_unrest
				duration = -1
			}
			trigger_event = {
				id = me_paurava.5 # Explanatory Event
			}
		}
	}
	paurava_missions_task_16 = { # Place Amongst our Own
		icon = "task_diplomatic"
		requires = {
			paurava_missions_task_15
		}
		prevented_by = {
			paurava_missions_task_17
			paurava_missions_task_18
		}
		allow = {
            while = {
                count = 20
                any_province = {
                    any_pops_in_province = {
                        pop_culture_group = hellenic
                    }
                }
            }
			stability >= 40
			political_influence >= 140
			treasury >= 400
			any_country_culture = {
				pop_culture_group = hellenic
				has_pop_type_right = citizen
			}
        }
		on_completion = {
		}
	}
	paurava_missions_task_17 = { # Get Out Greeks !
		icon = "task_conquest"
		requires = {
			paurava_missions_task_15
		}
		prevented_by = {
			OR = {
				paurava_missions_task_16
				paurava_missions_task_18
			}
		}
		allow = {
				any_country_culture = {
					OR = {
						is_culture = greco_indian
						is_culture = macedonian
						is_culture = ionian
					}
					is_pop_type_right = slaves
				}
			stability >= 40
			political_influence >= 140
			any_owned_province = {
				any_pops_in_province = {
					pop_culture_group = hellenic
					pop_type = slaves
				}
			}
		}
	}
	paurava_missions_task_18 = { # Embrace Hellenic Thought / Pentapotamia
		icon = "task_political"
		requires = {
			paurava_missions_task_15
		}
		prevented_by = {
			OR = {
				paurava_missions_task_16
				paurava_missions_task_17
			}
		}
		allow = {
			p:4371 = {
				has_city_status = yes
				total_population = 45
			}
			current_ruler = {
				popularity = 90
			}
			legitimacy = 90
			stability >= 60
		}
		on_completion = {
			while = {
				count = 15
				region:gandhara_region = {
		        	random_region_province = {
		        		limit = {
		        			owner = root
		        			any_pops_in_province = {
		        				pop_culture = purus
		        				NOT = { pop_type = tribesmen }
		        				NOT = { pop_type = slaves }		        				
		        			}
		        		}
		        		random_pops_in_province = {
		        			limit = {
		        				pop_culture = purus
		        				NOT = { pop_type = tribesmen }
		        				NOT = { pop_type = slaves }
		        			} 
		        			set_pop_culture = greco_indian
		        		}
		        	}
		        }			
			}
			add_stability = -20
			add_legitimacy = -50
			change_country_name = "PENTAPOTAMIA"
			hidden_effect = {
				change_country_flag = Pentapotamian_flag
				change_country_color = "pentapotamian_orange"
				set_primary_culture_cleanup_effect = {
					NEW_PRIMARY_CULTURE = greco_indian
					MAKE_OLD_CULTURE_INTEGRATED = yes
				}
			}
			every_character = {
                limit = {
                    OR = {
                        from_ruler_family = yes
                        is_minor_character = no
                    }
                }
                set_culture = greco_indian
			}
		}
	}
	paurava_missions_task_19 = { # Greek Matter Solved
		icon = "task_happiness"
		requires = {
			paurava_missions_task_18
			paurava_missions_task_17
			paurava_missions_task_16
		}
		on_completion = {
			add_country_modifier = {
				name = hellenic_advancement
				duration = 1000
			}
			remove_country_modifier = {
				indo_greek_unrest
			}
		}
	}
}