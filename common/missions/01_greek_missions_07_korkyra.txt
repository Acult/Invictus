greek_7_korkyra = {
    header = "mission_image_macedon"
    icon = "general_4"

    repeatable = no
    chance = {
        factor = 5
    }
    ai_chance = {factor = 3}

    potential = {
        tag = KRK
        NOT = { has_variable = mission_cooldown_var }
    }

    abort = {}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {
        add_2_free_province_investments = yes
    }
    greek_7_korkyra_task_1 = {
        icon = "task_happiness"
        allow = {
            capital_scope = {
            num_of_ports = 2
            num_of_used_building_slots >= 5
            trigger_if = {
                limit = { has_construction = yes }
                custom_tooltip = {
                    text = province_has_no_constuction_tooltip
                    has_construction  = no
                }
            }
        }
    }
        on_completion = {
            capital_scope = {
				create_state_pop = citizen
				create_state_pop = citizen
                create_state_pop = freemen	
			}
            trigger_event = me_greek_7_korkyra.1
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_2 = {
        icon = "task_expansion"
        allow = {
            num_of_ships >= 25
            
        }
        on_completion = {
            trigger_event = me_greek_7_korkyra.2
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_3 = {
        icon = "task_conquest"
        duration = 180

        allow = {
            has_law = mercenary_reliance
            stability > 55
            treasury >= 30
        }
        on_completion = {
            add_treasury = -30
            trigger_event = me_greek_7_korkyra.3
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_4 = {
        icon = "task_battle"
        duration = 90
        requires = {greek_7_korkyra_task_1 greek_7_korkyra_task_2 greek_7_korkyra_task_3}
        allow = {
            political_influence >= 50
            treasury >= 100
        }
        on_completion = {
            add_political_influence = -50
            add_treasury = -100
            add_country_modifier = {
                name = sharp_scythe
                duration = -1
            }
            trigger_event = me_greek_7_korkyra.4
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_5 = {
        icon = "task_religion"
        requires = {greek_7_korkyra_task_4}
        allow = {
            capital_scope = {
                is_holy_site = yes
            }
            custom_tooltip = {
                text = religious_piety_tt
                capital_scope.state = {
                    calc_true_if = {
                        amount >= 1   
                        state_improvement_religious_trigger = yes      
                    }
                }
            } 
        }
        on_completion = {
            trigger_event = me_greek_7_korkyra.5
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_6 = {
        icon = "task_conquest"
        requires = {greek_7_korkyra_task_4}
        allow = {
            political_influence >= 30
            treasury >= 50
        }
        on_completion = {
            add_political_influence = -30
            add_treasury = -50
            area:aetolia_area = {
                add_provincial_claim_effect = yes
            }
            trigger_event = me_greek_7_korkyra.6
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_7 = {
        icon = "task_diplomatic"
        duration = 90
        requires = {greek_7_korkyra_task_4}
        allow = {
            political_influence >= 30
            treasury >= 50
        }
        on_completion = {
            add_political_influence = -30
            add_treasury = -50
            area:epirus_area = {
                add_provincial_claim_effect = yes
            }
            trigger_event = me_greek_7_korkyra.7
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_8 = {
        icon = "task_battle"
        requires = {greek_7_korkyra_task_7}
        allow = {
            num_of_ships >= 50
        }
        on_completion = {
            current_ruler = {
        		add_popularity = 10
        	}
            declare_war_with_wargoal = {
				war_goal = naval_wargoal
                target = c:SYR
			}
            trigger_event = me_greek_7_korkyra.8
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_9 = {
        icon = "task_political"
        requires = {greek_7_korkyra_task_6 greek_7_korkyra_task_7}
        allow = {
            custom_tooltip = {
        		text = fifteen_troops_tt
		        any_country_sub_unit = {
		        	count >= 14
		        	is_cohort = yes
		        }
	        }
        }
        on_completion = {
            trigger_event = me_greek_7_korkyra.9
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_10 = {
        icon = "task_conquest"
        requires = {greek_7_korkyra_task_7}
        allow = {}
        on_completion = {
            add_country_modifier = {
                name = molossian_hounds
                duration = -1
            }
            trigger_event = me_greek_7_korkyra.10
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_11 = {
        icon = "task_political"
        requires = {greek_7_korkyra_task_10}
        allow = {
            political_influence >= 30
            treasury >= 50
        }
        on_completion = {
            add_political_influence = -30
            add_treasury = -50
            area:illyria_graeca_area = {
            add_provincial_claim_effect = yes
        }
            trigger_event = me_greek_7_korkyra.11
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_12 = {
        icon = "task_heracles"
        requires = {greek_7_korkyra_task_6}
        allow = {
            political_influence >= 50
            treasury >= 75
        }
        on_completion = {
            add_political_influence = -50
            add_treasury = -75
            p:427 = {
				add_claim = root
			}
            p:429 = {
				add_claim = root
			}
            p:430 = {
				add_claim = root
			}
            p:7889 = {
				add_claim = root
			}
            p:471 = {
				add_claim = root
			}
            p:450 = {
				add_claim = root
			}
            declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = 427
                target = p:427.owner
			}
            trigger_event = me_greek_7_korkyra.12
            show_as_tooltip = {

            }
        }
    }
    greek_7_korkyra_task_13 = {
        icon = "task_economical"
        final = yes
        duration = 180
        requires = {greek_7_korkyra_task_8}
        allow = {}
        on_completion = {
            add_innovation = 2
            add_treasury = 400
            trigger_event = me_greek_7_korkyra.13
            show_as_tooltip = {
            }
        }
    }
}